<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>public</access>
        <active>true</active>
        <api_name>x_58872_needit.IncidentsNotUpdatedInTimeframe</api_name>
        <caller_access/>
        <client_callable>true</client_callable>
        <description>Get Incidents Not Updated In Timeframe</description>
        <name>IncidentsNotUpdatedInTimeframe</name>
        <script><![CDATA[var IncidentsNotUpdatedInTimeframe = Class.create();
IncidentsNotUpdatedInTimeframe.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {

    //training leads to believe you can not do this but tutorial says you can
    getIncidents: function(daysPrevious) {
        //set amount of days previous
        daysPrevious = daysPrevious || 0;
        var foundDate = getPreviousBusinessDate(daysPrevious);
		var foundDateDisplay = foundDate.getValue();

        //now use the date as part of the gliderecord search for incidents
        //might as well do the whole thing here and just let the report
        //filter on the sys_ids i return.  it will be more efficient.
        var incidentQuery = new GlideRecord('incident');
        incidentQuery.addEncodedQuery("sys_updated_on<=" + foundDate + "^assignment_group!=f62d054f2fa2301005f659ab2799b685^state!=6^state!=3^ORhold_reason!=3^state!=7^state!=8");
        incidentQuery.query();
		var sys_id_array = [];
        while (incidentQuery.next()) {
            sys_id_array.push(incidentQuery.getUniqueValue());
        }
		return foundDateDisplay + "," + sys_id_array.join(',');
    },



    type: 'IncidentsNotUpdatedInTimeframe'
});]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-09-15 23:10:45</sys_created_on>
        <sys_id>e8d5f8362fe2301005f659ab2799b600</sys_id>
        <sys_mod_count>28</sys_mod_count>
        <sys_name>IncidentsNotUpdatedInTimeframe</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_script_include_e8d5f8362fe2301005f659ab2799b600</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-09-16 21:43:46</sys_updated_on>
    </sys_script_include>
</record_update>
